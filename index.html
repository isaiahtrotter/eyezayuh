<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eyezayuh</title>

    <!-- Icons / Manifest -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />

    <!-- Preconnect for Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Google Fonts (async load, preserves styling) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap"
      rel="stylesheet"
      media="print"
      onload="this.media='all'"
    />
    <noscript>
      <link
        href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap"
        rel="stylesheet"
      />
    </noscript>

    <!-- Main CSS (synchronous to preserve all layout and styling) -->
    <link rel="stylesheet" href="styles.css" />

    <!-- Flipbook / Icon CSS (async load to reduce render-blocking) -->
    <link rel="stylesheet" href="dflip/css/dflip.min.css" media="print" onload="this.media='all'" />
    <link
      rel="stylesheet"
      href="dflip/css/themify-icons.min.css"
      media="print"
      onload="this.media='all'"
    />
    <noscript>
      <link rel="stylesheet" href="dflip/css/dflip.min.css" />
      <link rel="stylesheet" href="dflip/css/themify-icons.min.css" />
    </noscript>
  </head>

  <body>
    <main>
      <header class="header">
        <picture>
          <!-- Mobile version -->
          <source srcset="images/Header_mobile.png" media="(max-width: 800px)" />
          <!-- Desktop version -->
          <img src="images/Header_desktop.png" alt="Eyezayuh logo" id="header-img" />
        </picture>
        <p class="synopsis">
          hey, i'm isaiah trotter.
          <a href="artist statement.pdf" target="_blank"
            >i’m documenting my life through sketchbooks</a
          >, aiming to finish 1,000 by my 85th birthday. many are personal — drawings of where i
          live and work, self portraits, vacations, everyday stuff. others are for practice — figure
          drawings, still lifes, landscapes — so i can draw my day to day more accurately. a lot of
          pages read like a diary, with thoughts, feelings, and notes from the moment. nothing’s
          curated or cleaned up. you can contact me
          <a href="mailto:trotter.isaiah0@gmail.com?subject=i saw your sketchbooks">here</a>, and
          you can see all the sketchbooks at once
          <a
            href="https://www.figma.com/design/ORx7YTJTyN6kMSja67tJGt/eyezayuh?node-id=0-1"
            target="_blank"
            >here in figma</a
          >. thanks for looking around (:
        </p>
      </header>

      <section style="margin-bottom: 24px" class="sketchbooks" id="sketchbooks"></section>
    </main>

    <footer class="signature">
      <img src="/images/signature.svg" alt="isaiah trotter signature" />
    </footer>

    <!-- Flipbook Scripts -->
    <script src="dflip/js/libs/jquery.min.js"></script>
    <script src="dflip/js/dflip.min.js"></script>

    <script>
      jQuery(() => {
        DFLIP.defaults.backgroundColor = "#EEEEEE";
        DFLIP.defaults.soundEnable = false;
        DFLIP.defaults.thumbsAutoFit = true;
        DFLIP.defaults.singlePageMode = false;
      });

      // ==== SKETCHBOOK DATA ====
      const sketchbooks = [
        {
          issue: 15,
          date: "10/7/25 - 10/25/25",
          width: 5.75,
          height: 8.25,
          spreads: 71,
          thumb: "thumbnails/issue_15.jpeg",
          source: "sketchbooks/issue_7.pdf",
        },
        {
          issue: 14,
          date: "9/15/25 - 10/5/25",
          width: 5.5,
          height: 8.375,
          spreads: 82,
          thumb: "thumbnails/issue_14.jpeg",
          source: "sketchbooks/issue_7.pdf",
        },
        {
          issue: 13,
          date: "9/4/25 - 9/13/25",
          width: 5.5,
          height: 8,
          spreads: 33,
          thumb: "thumbnails/issue_13.jpeg",
          source: "sketchbooks/issue_7.pdf",
        },
        {
          issue: 12,
          date: "8/12/25 - 9/1/25",
          width: 5.5,
          height: 3.5,
          spreads: 12,
          thumb: "thumbnails/issue_12.jpeg",
          source: "sketchbooks/issue_7.pdf",
        },
        {
          issue: 11,
          date: "8/7/25 - 8/28/25",
          width: 5.125,
          height: 8.375,
          spreads: 106,
          thumb: "thumbnails/issue_11.jpeg",
          source: "sketchbooks/issue_7.pdf",
        },
        {
          issue: 10,
          date: "7/25/25 - 8/7/25",
          width: 5.5,
          height: 3.5,
          spreads: 24,
          thumb: "thumbnails/issue_10.jpeg",
          source: "sketchbooks/issue_7.pdf",
        },
        {
          issue: 9,
          date: "7/9/25 - 7/24/25",
          width: 5.125,
          height: 8.375,
          spreads: 35,
          thumb: "thumbnails/issue_9.jpeg",
          source: "sketchbooks/issue_7.pdf",
        },
        {
          issue: 8,
          date: "6/16/25 - 7/8/25",
          width: 3.5,
          height: 5.5,
          spreads: 46,
          thumb: "thumbnails/issue_8.jpeg",
          source: "sketchbooks/issue_7.pdf",
          audio: "audio/issue8.m4a",
        },
        {
          issue: 7,
          date: "5/29/25 - 6/15/25",
          width: 3.5,
          height: 5.5,
          spreads: 32,
          thumb: "thumbnails/issue_7.jpeg",
          source: "sketchbooks/issue_7.pdf",
          audio: "audio/issue7.m4a",
        },
        {
          issue: 6,
          date: "5/13/25 - 5/27/25",
          width: 5.5,
          height: 8,
          spreads: 33,
          thumb: "thumbnails/issue_6.jpeg",
          source: "sketchbooks/Cancer-2024-Rev-April-2025.pdf",
          audio: "audio/issue6.m4a",
        },
        {
          issue: 5,
          date: "5/12/25 - 5/12/25",
          width: 3.5,
          height: 5.5,
          spreads: 30,
          thumb: "thumbnails/issue_5.jpeg",
          source: "sketchbooks/Cancer-2024-Rev-April-2025.pdf",
          audio: "audio/issue5.m4a",
        },
        {
          issue: 4,
          date: "5/1/25 - 5/11/25",
          width: 5.125,
          height: 8.25,
          spreads: 48,
          thumb: "thumbnails/issue_4.jpeg",
          source: "sketchbooks/Cancer-2024-Rev-April-2025.pdf",
          audio: "audio/issue4.m4a",
        },
        {
          issue: 3,
          date: "4/21/25 - 4/30/25",
          width: 3.5,
          height: 5.5,
          spreads: 36,
          thumb: "thumbnails/issue_3.jpeg",
          source: "sketchbooks/Cancer-2024-Rev-April-2025.pdf",
          audio: "audio/issue3.m4a",
        },
        {
          issue: 2,
          date: "4/9/25 - 4/20/25",
          width: 5.5,
          height: 3.5,
          spreads: 36,
          thumb: "thumbnails/issue_2.jpeg",
          source: "sketchbooks/Cancer-2024-Rev-April-2025.pdf",
          audio: "audio/issue2.m4a",
        },
        {
          issue: 1,
          date: "3/15/25 - 4/9/25",
          width: 5.5,
          height: 3.5,
          spreads: 36,
          thumb: "thumbnails/issue_1.jpeg",
          source: "sketchbooks/issue_1.pdf",
          audio: "audio/issue1.m4a",
        },
      ];

      const PIXELS_PER_INCH = 50; // base scale

      // ==== RENDER SKETCHBOOKS ====
      const container = document.getElementById("sketchbooks");

      sketchbooks.forEach((s) => {
        const book = document.createElement("div");
        book.className = "sketchbook";

        // calculate pixel width/height based on real dimensions
        const pixelWidth = s.width * PIXELS_PER_INCH;
        const pixelHeight = s.height * PIXELS_PER_INCH;

        book.innerHTML = `
        <div class="_df_thumb" 
             id="issue_${s.issue}" 
             source="${s.source}" 
             thumb="${s.thumb}"
             style="width:${pixelWidth}px;">
        </div>
        <div class="sketchbook-footer">
          <p class="sketchbook-text">
            <span style="letter-spacing:4px">[issue ${s.issue}]</span><br/>
            ${s.date}<br/>
            <span style="color:gray">${s.width}" × ${s.height}"<br/>${s.spreads} spreads</span>
          </p>
          ${
            s.audio
              ? `<p class="audio-toggle" data-audio="${s.audio}" title="Play audio">▶</p>`
              : ""
          }
        </div>
      `;
        container.appendChild(book);
      });

      // ==== AUDIO TOGGLE LOGIC ====
      let currentAudio = null,
        currentToggle = null;

      document.addEventListener("click", (e) => {
        if (!e.target.classList.contains("audio-toggle")) return;

        const el = e.target;
        const audioSrc = el.dataset.audio;

        // If clicking the same button again, toggle play/pause
        if (currentAudio && currentAudio.src.includes(audioSrc)) {
          if (currentAudio.paused) {
            currentAudio.play();
            el.textContent = "⏸";
            el.classList.add("active");
          } else {
            currentAudio.pause();
            el.textContent = "▶";
            el.classList.remove("active");
          }
          return;
        }

        // Stop previous audio if a different one is playing
        if (currentAudio) {
          currentAudio.pause();
          currentToggle.textContent = "▶";
          currentToggle.classList.remove("active");
        }

        // Start new audio
        currentAudio = new Audio(audioSrc);
        currentAudio.play();
        el.textContent = "⏸";
        el.classList.add("active");
        currentToggle = el;

        currentAudio.onended = () => {
          el.textContent = "▶";
          el.classList.remove("active");
          currentAudio = null;
          currentToggle = null;
        };
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const footer = document.querySelector(".signature");

        // Calculate stats dynamically from your sketchbooks array
        const totalSketchbooks = sketchbooks.length;
        const totalSpreads = sketchbooks.reduce((sum, s) => sum + (s.spreads || 0), 0);
        const averageSpreads = (totalSpreads / totalSketchbooks).toFixed(1);

        // Helper function to calculate days between two dates (MM/DD/YY - MM/DD/YY)
        function daysBetween(dateRange) {
          const [startStr, endStr] = dateRange.split(" - ");
          const [startMonth, startDay, startYear] = startStr.split("/").map(Number);
          const [endMonth, endDay, endYear] = endStr.split("/").map(Number);

          const startDate = new Date(2000 + startYear, startMonth - 1, startDay);
          const endDate = new Date(2000 + endYear, endMonth - 1, endDay);

          return (endDate - startDate) / (1000 * 60 * 60 * 24) + 1;
        }

        // Calculate total and average days across all sketchbooks
        const totalDays = sketchbooks.reduce((sum, s) => sum + daysBetween(s.date), 0);
        const averageDays = (totalDays / totalSketchbooks).toFixed(1);

        // Create the stats container
        const stats = document.createElement("div");
        stats.classList.add("footer-stats");

        stats.innerHTML = `
      <div>issues: ${totalSketchbooks}</div>
      <div>spreads: ${totalSpreads}</div>
      <div>avg. spreads/issue: ${averageSpreads}</div>
      <div>avg. days/issue: ${averageDays}</div>
    `;

        footer.appendChild(stats);
      });
    </script>
  </body>
</html>
